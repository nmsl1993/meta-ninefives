#
# Nine Fives Local Configuration Template
# This file is intended to be copied to your build directory as conf/local.conf
#

# MACHINE Configuration
MACHINE = "imx6ul-ninefives-evk"

# DISTRO Configuration
DISTRO = "fsl-imx-fb"

# Package Management
PACKAGE_CLASSES = "package_deb"
EXTRA_IMAGE_FEATURES += "package-management"

# Nine Fives specific settings
INHERIT += "extrausers"
EXTRA_USERS_PARAMS = "useradd -P ninefives ninefives;"

# Build optimization
BB_NUMBER_THREADS = "8"
PARALLEL_MAKE = "-j 8"

# Download directory (adjust path as needed)
DL_DIR = "${TOPDIR}/../downloads"

# Shared state cache directory (adjust path as needed)
SSTATE_DIR = "${TOPDIR}/../sstate-cache"

# Build space optimization
INHERIT += "rm_work"

# SDK settings
SDKMACHINE = "x86_64"

# Image features
IMAGE_FEATURES += " \
    ssh-server-openssh \
    tools-debug \
    tools-profile \
    debug-tweaks \
"

# Additional packages for Nine Fives image
IMAGE_INSTALL:append = " \
    htop \
    iperf3 \
    tcpdump \
    wget \
    curl \
    vim \
    git \
    can-utils \
    i2c-tools \
    usbutils \
    pciutils \
"

# U-Boot configuration
UBOOT_CONFIG = "sd"
IMX_DEFAULT_BOOTLOADER = "u-boot-imx"

# Kernel configuration
PREFERRED_PROVIDER_virtual/kernel = "linux-imx"

# Root filesystem
IMAGE_ROOTFS_SIZE = "8192"
IMAGE_ROOTFS_EXTRA_SPACE = "512000"

# Development settings
EXTRA_IMAGE_FEATURES += "tools-sdk dev-pkgs"

# License handling
LICENSE_FLAGS_ACCEPTED = "commercial"

# Nine Fives branding
DISTRO_FEATURES:append = " systemd"
VIRTUAL-RUNTIME_init_manager = "systemd"

# Network configuration
DISTRO_FEATURES:append = " wifi bluetooth"

# Graphics support
DISTRO_FEATURES:append = " wayland x11"

# Security features
DISTRO_FEATURES:append = " security"

# Custom image name
IMAGE_NAME = "ninefives-${MACHINE}-${DATETIME}"
IMAGE_NAME[vardepsexclude] = "DATETIME"